# FastAPI Проект для SHIFT ЦФТ

## 1. Технологический стек

### Стек
- Python 3.12
- FastAPI
- SQLAlchemy
- Alembic
- PostgreSQL
- Pydantic
- Poetry
- Docker & Docker Compose

---

## 2. Описание работы

Это RESTful API, разработанное в рамках тестового задания. Приложение построено на современном ***асинхронном*** стеке Python с упором на ***чистую архитектуру*** и ***надежность***.

За основу обработки запросов была взята трехуровневая архитектура:
1) **Слой API** - *обработка HTTP-запросов (валидация, обработка ошибок)*
2) **Слой "Сервис"** - *бизнес логика*
3) **Слой "Репозиторий"** - *работа с базой данных*

Хоть для размера этого проекта такой подход кажется избыточным, решил написать так с целью продемонстрировать свои навыки и сделать реализацию более интересной.

---

## 3. Запуск проекта
Для удобства и сокращения шагов для запуска, я не стал ставить gitignore на .env-файл. Так что при клонировании все переменные окружения уже будут в проекте.
1) Открыть командную строку
2) Ввести: git clone https://github.com/design-smart-home/RESTful.git *- клонирование репозитория*
3) Ввести: cd ./TestTaskSHIFT *- переход в папку проекта*
4) Ввести: pip install poetry *- установка менеджера пакетов*
5) Ввести: pip install poethepoet=="0.36.0" *- установка пакета*
6) Запустить Docker Desktop (на Windows) *- запуск Docker Engine*
7) Ввести (в cmd): poe start *- сборка и запуск контейнеров (база + приложение)*
8) Перейти по http://127.0.0.1:8000/docs *- открытие документации fastAPI*

**Для подключения к базе данных можно использовать следующие параметры**
- Драйвер = PostgreSQL
- Хост = localhost
- Порт = 5432
- База данных = test_task_shift_db
- Пользователь = postgres
- Пароль = postgres

---

## 4. Взаимодействие с API

Весь набор роутов описан в Swagger'е по http://127.0.0.1:8000/docs.

Представлен набор роутов CRUD (для employee - сотрудника)

А также 2 основных роута из задания:

- **GET /employee/salary/ (payload={token})**
- **GET /employee/date_of_promotion/ (payload={token})**

Для использования этих роутов необходим JWT-токен, который можно получить по роуту ***POST /authorization/token/ (payload={login, password})***  разделе ***authorization***

Пример сценария:

- POST /employee/ (payload={login, password, salary, date_of_promotion}) *- создание сотрудника*
- POST /authorization/token/ (payload={login, password}) *- получение специального токена*
- GET /employee/salary/ (payload={token}) *- получение зарплаты сотрудника*
- GET /employee/date_of_promotion/ (payload={token}) *- получение даты повышения сотрудника*
